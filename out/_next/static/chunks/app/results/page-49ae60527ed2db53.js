(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{63:(e,r,t)=>{"use strict";var a=t(7260);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},350:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>k});var a=t(5155),s=t(2115),i=t(63),n=t(5783),l=t(4269),c=t(6948),o=t(3998),d=t(1647);let m=(0,t(1847).A)("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);var u=t(6154),h=t(2529),p=t(7910),x=t(4947);function g(e){let{policy:r,isSelected:t,onSelect:s,className:i}=e,n=()=>{r.loading||null==s||s(r)},g=e=>new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:2}).format(e),f=e=>new Date(e).toLocaleDateString("en-MY",{day:"2-digit",month:"short",year:"numeric"});return r.loading?(0,a.jsx)(c.Zp,{className:(0,l.cn)("h-full flex items-center justify-center bg-blue-50/50 border-2 border-dashed border-blue-200",i),children:(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center text-center space-y-3",children:[(0,a.jsx)(m,{className:"w-8 h-8 text-blue-400 animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground",children:"Waiting for insurer"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Price will be displayed once ready..."})]})]})}):(0,a.jsxs)(c.Zp,{className:(0,l.cn)("flex flex-col h-full cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-[1.02]","border-2 hover:border-primary/50",t&&"border-primary ring-2 ring-primary/20 shadow-lg bg-orange-500/10 hover:bg-orange-500/20",r.isRecommended&&"ring-1 ring-orange-200",i),onClick:n,children:[r.isRecommended&&(0,a.jsx)("div",{className:"absolute -top-2 left-4 z-10",children:(0,a.jsxs)(d.E,{className:"bg-primary text-primary-foreground px-3 py-1 text-xs font-semibold",children:[(0,a.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"Recommended"]})}),(0,a.jsx)(c.aR,{className:"pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ZB,{className:"text-lg font-bold text-foreground",children:"Takaful Plan"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Shariah-compliant coverage"})]}),r.discountPercentage&&(0,a.jsxs)(d.E,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-200",children:["-",r.discountPercentage,"% OFF"]})]})}),(0,a.jsxs)(c.Wu,{className:"flex flex-col flex-1 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Coverage Period:"}),(0,a.jsxs)("span",{className:"font-medium",children:[f(r.startDate)," - ",f(r.expiryDate)]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-foreground",children:"Key Features:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-1",children:[r.features.slice(0,3).map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e})]},r)),r.features.length>3&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground ml-6",children:["+",r.features.length-3," more features"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 pt-2",children:[r.coverage.comprehensive&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-green-600"}),(0,a.jsx)("span",{children:"Comprehensive"})]}),r.coverage.theft&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-blue-600"}),(0,a.jsx)("span",{children:"Theft"})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-2 mt-auto",children:[r.discountPercentage&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Original Price:"}),(0,a.jsx)("span",{className:"text-sm line-through text-muted-foreground",children:g(r.originalPrice)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-foreground",children:"Final Price:"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-primary",children:g(r.finalPrice)})]})]}),(0,a.jsx)(o.$,{onClick:e=>{e.stopPropagation(),n()},className:(0,l.cn)("w-full mt-2 h-14 text-lg font-bold shadow-lg transition-all duration-200",t?"bg-primary hover:bg-primary/90 text-white border-primary shadow-primary/25":"bg-primary hover:bg-primary/90 text-white border-primary shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02]"),variant:"default",children:t?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Policy Selected"})]}):"Select This Policy"})]})]})}let f=[{id:"etiqa",name:"Etiqa Insurance",logo:"/logos/etiqa-logo.svg",trustScore:9.2},{id:"allianz",name:"Allianz Malaysia",logo:"/logos/allianz-logo.svg",trustScore:9.5},{id:"liberty",name:"Liberty Insurance",logo:"/logos/liberty-logo.svg",trustScore:8.8},{id:"takaful-ikhlas",name:"Takaful Ikhlas",logo:"/logos/takaful-ikhlas-logo.svg",trustScore:9}],v=()=>new Date().toISOString().split("T")[0],y=()=>{let e=new Date;return new Date(e.getFullYear()+1,e.getMonth(),e.getDate()).toISOString().split("T")[0]},b=[{id:"etiqa-comprehensive-car",provider:f[0],startDate:v(),expiryDate:y(),description:"Comprehensive coverage with roadside assistance and windscreen protection.",features:["Comprehensive coverage","24/7 Roadside assistance","Windscreen protection","Flood coverage","Theft protection"],originalPrice:1850,discountPercentage:15,finalPrice:1572.5,isRecommended:!0,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}},{id:"allianz-premium-car",provider:f[1],startDate:v(),expiryDate:y(),description:"Premium protection with enhanced benefits and global coverage.",features:["Premium comprehensive coverage","Global emergency assistance","Rental car coverage","Personal accident coverage","Legal liability protection"],originalPrice:2100,discountPercentage:10,finalPrice:1890,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}},{id:"liberty-essential-car",provider:f[2],startDate:v(),expiryDate:y(),description:"Essential coverage with competitive pricing and reliable service.",features:["Comprehensive coverage","Roadside assistance","Workshop network","Online claims","Fast settlement"],originalPrice:1650,discountPercentage:20,finalPrice:1320,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!1,windscreen:!0}},{id:"etiqa-basic-car",provider:f[0],startDate:v(),expiryDate:y(),description:"Basic comprehensive coverage with essential protection.",features:["Basic comprehensive coverage","Roadside assistance","Workshop repairs","Online support"],originalPrice:1450,finalPrice:1450,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!1,windscreen:!1}},{id:"takaful-ikhlas-comprehensive-car",provider:f[3],startDate:v(),expiryDate:y(),description:"Shariah-compliant comprehensive takaful coverage with ethical protection.",features:["Shariah-compliant takaful","Comprehensive coverage","24/7 Roadside assistance","Windscreen protection","Flood coverage","Theft protection","Halal investment returns"],originalPrice:1950,discountPercentage:12,finalPrice:1716,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}},{id:"takaful-ikhlas-premium-car",provider:f[3],startDate:v(),expiryDate:y(),description:"Premium takaful plan with enhanced benefits and surplus distribution.",features:["Premium takaful coverage","Surplus distribution","Personal accident coverage","Rental car coverage","Global assistance","Halal investment"],originalPrice:2200,discountPercentage:8,finalPrice:2024,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}}],j=[{id:"allianz-comprehensive-motorcycle",provider:f[1],startDate:v(),expiryDate:y(),description:"Comprehensive motorcycle coverage with rider protection.",features:["Comprehensive coverage","Personal accident coverage","Theft protection","Roadside assistance","Helmet coverage"],originalPrice:650,discountPercentage:12,finalPrice:572,isRecommended:!0,coverage:{liability:"RM1,000,000",comprehensive:!0,theft:!0,flood:!0,windscreen:!1}},{id:"liberty-motorcycle-plus",provider:f[2],startDate:v(),expiryDate:y(),description:"Enhanced motorcycle protection with additional benefits.",features:["Comprehensive coverage","Accessories coverage","Towing service","Workshop network","Fast claims"],originalPrice:580,discountPercentage:18,finalPrice:475.6,coverage:{liability:"RM1,000,000",comprehensive:!0,theft:!0,flood:!1,windscreen:!1}},{id:"etiqa-motorcycle-basic",provider:f[0],startDate:v(),expiryDate:y(),description:"Affordable motorcycle coverage with essential protection.",features:["Third party coverage","Basic theft protection","Roadside assistance","Online claims"],originalPrice:420,finalPrice:420,coverage:{liability:"RM500,000",comprehensive:!1,theft:!0,flood:!1,windscreen:!1}},{id:"takaful-ikhlas-motorcycle-comprehensive",provider:f[3],startDate:v(),expiryDate:y(),description:"Shariah-compliant comprehensive motorcycle takaful with rider protection.",features:["Shariah-compliant takaful","Comprehensive coverage","Personal accident coverage","Theft protection","Roadside assistance","Helmet coverage","Halal investment"],originalPrice:680,discountPercentage:10,finalPrice:612,coverage:{liability:"RM1,000,000",comprehensive:!0,theft:!0,flood:!0,windscreen:!1}}];var N=t(5626),w=t(8519);let P=["Details","Processing","Results","Payment"];function k(){let e=(0,i.useRouter)(),[r,t]=s.useState(null),[l,c]=s.useState(null),[d,m]=s.useState([]);s.useEffect(()=>{let r=sessionStorage.getItem("insuranceFormData");if(!r)return void e.push("/");try{let e,a=JSON.parse(r);t(a);let s=(e=a.vehicleType,"car"===e?b:j).filter(e=>"takaful-ikhlas"===e.provider.id).map((e,r)=>({...e,loading:r>0}));m(s),s.forEach((e,r)=>{if(r>0){let t=1500+1e3*r+500*Math.random();setTimeout(()=>{m(r=>r.map(r=>r.id===e.id?{...r,loading:!1}:r))},t)}})}catch(r){console.error("Error parsing form data:",r),e.push("/")}},[e]);let u=e=>{e.loading||(c(e),sessionStorage.setItem("selectedPolicy",JSON.stringify(e)))};if(!r)return null;let h=P.map((e,r)=>1===r?"Processed":e);return(0,a.jsx)(n.Mx,{children:(0,a.jsxs)(n.mc,{className:"py-8",children:[(0,a.jsx)(n.SK,{steps:h,currentStep:2}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Your Insurance Options"}),(0,a.jsxs)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["We found ",d.length," insurance policies for your ",r.vehicleType,". Compare and select the best option for you."]})]}),(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-6 max-w-md mx-auto",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Your Details:"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Vehicle:"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:r.vehicleType})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Plate Number:"}),(0,a.jsx)("span",{className:"font-medium",children:r.plateNumber})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Postcode:"}),(0,a.jsx)("span",{className:"font-medium",children:r.postcode})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Customer Type:"}),(0,a.jsx)("span",{className:"font-medium capitalize",children:r.customerType})]})]})]}),(0,a.jsx)(n.xA,{cols:{default:1,md:2,lg:3},gap:6,className:"max-w-7xl mx-auto",children:d.map(e=>(0,a.jsx)(g,{policy:e,isSelected:(null==l?void 0:l.id)===e.id,onSelect:u},e.id))}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-lg mx-auto",children:[(0,a.jsxs)(o.$,{variant:"outline",onClick:()=>{e.push("/")},className:"w-full sm:w-auto h-12",children:[(0,a.jsx)(N.A,{className:"w-4 h-4 mr-2"}),"Back to Form"]}),(0,a.jsxs)(o.$,{onClick:()=>{l&&e.push("/payment")},disabled:!l,className:"w-full sm:w-auto h-12 text-lg font-semibold shadow-lg transition-all duration-200 ".concat(l?"bg-primary hover:bg-primary/90 shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02]":""),children:[(0,a.jsx)(w.A,{className:"w-5 h-5 mr-2"}),"Proceed to Payment"]})]}),l&&(0,a.jsx)("div",{className:"text-center text-sm text-muted-foreground max-w-md mx-auto",children:(0,a.jsxs)("p",{children:["You've selected a Takaful plan for"," ",(0,a.jsxs)("strong",{children:["RM",l.finalPrice.toFixed(2)]}),'. Click "Proceed to Payment" to complete your purchase.']})})]})]})})}},1647:(e,r,t)=>{"use strict";t.d(r,{E:()=>c});var a=t(5155);t(2115);var s=t(2467),i=t(3101),n=t(4269);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,asChild:i=!1,...c}=e,o=i?s.DX:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(l({variant:t}),r),...c})}},2529:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3101:(e,r,t)=>{"use strict";t.d(r,{F:()=>n});var a=t(2821);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=a.$,n=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return i(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:l}=r,c=Object.keys(n).map(e=>{let r=null==t?void 0:t[e],a=null==l?void 0:l[e];if(null===r)return null;let i=s(r)||s(a);return n[e][i]}),o=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return i(e,c,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...o}[r]):({...l,...o})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},4947:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},5626:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6154:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6255:(e,r,t)=>{Promise.resolve().then(t.bind(t,350))},7910:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8519:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(1847).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}},e=>{e.O(0,[887,309,441,255,358],()=>e(e.s=6255)),_N_E=e.O()}]);