(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},18566,(e,t,r)=>{t.exports=e.r(76562)},15288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>i,"CardFooter",()=>d,"CardHeader",()=>s,"CardTitle",()=>n]);var t=e.i(43476),r=e.i(75157);function a(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...s})}function s(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...s})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",a),...s})}function i(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",a),...s})}function d(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",a),...s})}},19455,25913,e=>{"use strict";e.s(["Button",()=>c],19455);var t=e.i(43476),r=e.i(91918);e.s(["cva",()=>i],25913);var a=e.i(7670);let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,n=a.clsx,i=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,d=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let n=s(t)||s(a);return i[e][n]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,d,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};var l=e.i(75157);let d=i("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:a,variant:s,size:n,asChild:i=!1,...c}=e,o=i?r.Slot:"button";return(0,t.jsx)(o,{"data-slot":"button",className:(0,l.cn)(d({variant:s,size:n,className:a})),...c})}},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},94351,e=>{"use strict";e.s(["Home",()=>t],94351);let t=(0,e.i(75254).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},7089,e=>{"use strict";e.s(["SENANGPAY_CONFIG",()=>a,"generateSenangPayHash",()=>s,"verifySenangPayHash",()=>n]);let t="136175265133530",r="SK-IHRzWygdRgIPOiq9leu7",a={merchantId:t,secretKey:r,url:"https://sandbox.senangpay.my/payment/"+t};async function s(e,t,a){return await i(r,r+e+t+a)}async function n(e,t,a,s,n){return await i(r,r+e+t+a+s)===n}async function i(e,t){let r=new TextEncoder,a=r.encode(e),s=r.encode(t),n=await crypto.subtle.importKey("raw",a,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return Array.from(new Uint8Array(await crypto.subtle.sign("HMAC",n,s))).map(e=>e.toString(16).padStart(2,"0")).join("")}},30618,e=>{"use strict";e.s(["default",()=>h],30618);var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22794),n=e.i(15288),i=e.i(19455),l=e.i(69638),d=e.i(75254);let c=(0,d.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=e.i(94351);let u=(0,d.default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var m=e.i(7089);function x(){let e=(0,a.useRouter)(),d=(0,a.useSearchParams)(),[x,h]=r.useState("loading"),[f,p]=r.useState("");return(r.useEffect(()=>{let t=d.get("status_id"),r=d.get("msg"),a=d.get("transaction_id"),s=d.get("order_id"),n=d.get("hash");if(!t||!n){h("failed"),p("Invalid payment response.");return}(async()=>{try{await (0,m.verifySenangPayHash)(t,s||"",a||"",r||"",n)?"1"===t?(h("success"),setTimeout(()=>{e.push("/thank-you")},1500)):(h("failed"),p(r?r.replace(/_/g," "):"Payment failed")):(h("failed"),p("Security verification failed. Data may be tampered."))}catch(e){console.error("Verification error:",e),h("failed"),p("Error verifying payment status.")}})()},[d,e]),"loading"===x)?(0,t.jsx)(s.CenteredLayout,{maxWidth:"max-w-md",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Verifying Payment..."}),(0,t.jsx)("p",{className:"text-muted-foreground text-center",children:"Please do not close this window."})]})}):"success"===x?(0,t.jsx)(s.CenteredLayout,{maxWidth:"max-w-md",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8",children:[(0,t.jsx)(l.CheckCircle,{className:"w-16 h-16 text-green-500"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-600",children:"Payment Successful!"}),(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"Redirecting you to confirmation page..."})]})}):(0,t.jsx)(s.CenteredLayout,{maxWidth:"max-w-lg",children:(0,t.jsxs)(n.Card,{className:"border-destructive/50",children:[(0,t.jsxs)(n.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)(c,{className:"w-8 h-8 text-red-600"})}),(0,t.jsx)(n.CardTitle,{className:"text-2xl text-red-600",children:"Payment Failed"})]}),(0,t.jsxs)(n.CardContent,{className:"text-center space-y-4",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:f}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"We couldn't process your payment. Please try again or use a different payment method."})]}),(0,t.jsxs)(n.CardFooter,{className:"flex flex-col space-y-3",children:[(0,t.jsxs)(i.Button,{className:"w-full",onClick:()=>e.push("/payment"),children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,t.jsxs)(i.Button,{variant:"outline",className:"w-full",onClick:()=>e.push("/"),children:[(0,t.jsx)(o.Home,{className:"w-4 h-4 mr-2"}),"Return to Home"]})]})]})})}function h(){return(0,t.jsx)(s.PageLayout,{children:(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(s.CenteredLayout,{maxWidth:"max-w-md",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 p-8",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Loading..."})]})}),children:(0,t.jsx)(x,{})})})}}]);