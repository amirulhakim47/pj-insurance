(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{1647:(e,r,s)=>{"use strict";s.d(r,{E:()=>c});var t=s(5155);s(2115);var a=s(2467),i=s(3101),n=s(4269);let o=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:s,asChild:i=!1,...c}=e,l=i?a.DX:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,n.cn)(o({variant:s}),r),...c})}},6255:(e,r,s)=>{Promise.resolve().then(s.bind(s,9632))},9632:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>S});var t=s(5155),a=s(2115),i=s(63),n=s(5783),o=s(5239),c=s(4269),l=s(6948),d=s(3998),m=s(1647),x=s(7415),u=s(6154),p=s(2529),h=s(7910),g=s(4947);function f(e){let{policy:r,isSelected:s,onSelect:a,className:i}=e,n=()=>{r.loading||null==a||a(r)},f=e=>new Intl.NumberFormat("en-MY",{style:"currency",currency:"MYR",minimumFractionDigits:2}).format(e),v=e=>new Date(e).toLocaleDateString("en-MY",{day:"2-digit",month:"short",year:"numeric"});return r.loading?(0,t.jsx)(l.Zp,{className:(0,c.cn)("h-full flex items-center justify-center bg-blue-50/50 border-2 border-dashed border-blue-200",i),children:(0,t.jsxs)("div",{className:"p-6 flex flex-col items-center justify-center text-center space-y-3",children:[(0,t.jsx)(x.A,{className:"w-8 h-8 text-blue-400 animate-pulse"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Waiting for insurer"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Price will be displayed once ready..."})]})]})}):(0,t.jsxs)(l.Zp,{className:(0,c.cn)("flex flex-col h-full cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-[1.02]","border-2 hover:border-primary/50",s&&"border-primary ring-2 ring-primary/20 shadow-lg bg-orange-500/10 hover:bg-orange-500/20",r.isRecommended&&"ring-1 ring-orange-200",i),onClick:n,children:[r.isRecommended&&(0,t.jsx)("div",{className:"absolute -top-2 left-4 z-10",children:(0,t.jsxs)(m.E,{className:"bg-primary text-primary-foreground px-3 py-1 text-xs font-semibold",children:[(0,t.jsx)(u.A,{className:"w-3 h-3 mr-1"}),"Recommended"]})}),(0,t.jsx)(l.aR,{className:"pb-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:(0,t.jsx)(o.default,{src:r.provider.logo,alt:"".concat(r.provider.name," logo"),width:48,height:48,className:"object-contain",onError:e=>{let s=e.target;s.style.display="none";let t=s.parentElement;t&&(t.innerHTML='<span class="text-xs font-bold text-muted-foreground">'.concat(r.provider.name.charAt(0),"</span>"))}})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.ZB,{className:"text-lg font-bold text-foreground",children:r.provider.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Trust Score: ",r.provider.trustScore,"/10"]})]})]}),r.discountPercentage&&(0,t.jsxs)(m.E,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-200",children:["-",r.discountPercentage,"% OFF"]})]})}),(0,t.jsxs)(l.Wu,{className:"flex flex-col flex-1 space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:r.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Coverage Period:"}),(0,t.jsxs)("span",{className:"font-medium",children:[v(r.startDate)," - ",v(r.expiryDate)]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-foreground",children:"Key Features:"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-1",children:[r.features.slice(0,3).map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(p.A,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:e})]},r)),r.features.length>3&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground ml-6",children:["+",r.features.length-3," more features"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 pt-2",children:[r.coverage.comprehensive&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 text-green-600"}),(0,t.jsx)("span",{children:"Comprehensive"})]}),r.coverage.theft&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 text-blue-600"}),(0,t.jsx)("span",{children:"Theft"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 space-y-2 mt-auto",children:[r.discountPercentage&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Original Price:"}),(0,t.jsx)("span",{className:"text-sm line-through text-muted-foreground",children:f(r.originalPrice)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-foreground",children:"Final Price:"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-primary",children:f(r.finalPrice)})]})]}),(0,t.jsx)(d.$,{onClick:e=>{e.stopPropagation(),n()},className:(0,c.cn)("w-full mt-2 h-14 text-lg font-bold shadow-lg transition-all duration-200",s?"bg-primary hover:bg-primary/90 text-white border-primary shadow-primary/25":"bg-primary hover:bg-primary/90 text-white border-primary shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02]"),variant:"default",children:s?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Policy Selected"})]}):"Select This Policy"})]})]})}let v=[{id:"etiqa",name:"Etiqa Insurance",logo:"/logos/etiqa-logo.svg",trustScore:9.2},{id:"allianz",name:"Allianz Malaysia",logo:"/logos/allianz-logo.svg",trustScore:9.5},{id:"liberty",name:"Liberty Insurance",logo:"/logos/liberty-logo.svg",trustScore:8.8}],y=()=>new Date().toISOString().split("T")[0],b=()=>{let e=new Date;return new Date(e.getFullYear()+1,e.getMonth(),e.getDate()).toISOString().split("T")[0]},j=[{id:"etiqa-comprehensive-car",provider:v[0],startDate:y(),expiryDate:b(),description:"Comprehensive coverage with roadside assistance and windscreen protection.",features:["Comprehensive coverage","24/7 Roadside assistance","Windscreen protection","Flood coverage","Theft protection"],originalPrice:1850,discountPercentage:15,finalPrice:1572.5,isRecommended:!0,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}},{id:"allianz-premium-car",provider:v[1],startDate:y(),expiryDate:b(),description:"Premium protection with enhanced benefits and global coverage.",features:["Premium comprehensive coverage","Global emergency assistance","Rental car coverage","Personal accident coverage","Legal liability protection"],originalPrice:2100,discountPercentage:10,finalPrice:1890,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!0,windscreen:!0}},{id:"liberty-essential-car",provider:v[2],startDate:y(),expiryDate:b(),description:"Essential coverage with competitive pricing and reliable service.",features:["Comprehensive coverage","Roadside assistance","Workshop network","Online claims","Fast settlement"],originalPrice:1650,discountPercentage:20,finalPrice:1320,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!1,windscreen:!0}},{id:"etiqa-basic-car",provider:v[0],startDate:y(),expiryDate:b(),description:"Basic comprehensive coverage with essential protection.",features:["Basic comprehensive coverage","Roadside assistance","Workshop repairs","Online support"],originalPrice:1450,finalPrice:1450,coverage:{liability:"Unlimited",comprehensive:!0,theft:!0,flood:!1,windscreen:!1}}],N=[{id:"allianz-comprehensive-motorcycle",provider:v[1],startDate:y(),expiryDate:b(),description:"Comprehensive motorcycle coverage with rider protection.",features:["Comprehensive coverage","Personal accident coverage","Theft protection","Roadside assistance","Helmet coverage"],originalPrice:650,discountPercentage:12,finalPrice:572,isRecommended:!0,coverage:{liability:"RM1,000,000",comprehensive:!0,theft:!0,flood:!0,windscreen:!1}},{id:"liberty-motorcycle-plus",provider:v[2],startDate:y(),expiryDate:b(),description:"Enhanced motorcycle protection with additional benefits.",features:["Comprehensive coverage","Accessories coverage","Towing service","Workshop network","Fast claims"],originalPrice:580,discountPercentage:18,finalPrice:475.6,coverage:{liability:"RM1,000,000",comprehensive:!0,theft:!0,flood:!1,windscreen:!1}},{id:"etiqa-motorcycle-basic",provider:v[0],startDate:y(),expiryDate:b(),description:"Affordable motorcycle coverage with essential protection.",features:["Third party coverage","Basic theft protection","Roadside assistance","Online claims"],originalPrice:420,finalPrice:420,coverage:{liability:"RM500,000",comprehensive:!1,theft:!0,flood:!1,windscreen:!1}}];var w=s(5626),P=s(8519);let D=["Details","Processing","Results","Payment"];function S(){let e=(0,i.useRouter)(),[r,s]=a.useState(null),[o,c]=a.useState(null),[l,m]=a.useState([]);a.useEffect(()=>{let r=sessionStorage.getItem("insuranceFormData");if(!r)return void e.push("/");try{let e,t=JSON.parse(r);s(t);let a=(e=t.vehicleType,"car"===e?j:N).map((e,r)=>({...e,loading:r>0}));m(a),a.forEach((e,r)=>{if(r>0){let s=1500+1e3*r+500*Math.random();setTimeout(()=>{m(r=>r.map(r=>r.id===e.id?{...r,loading:!1}:r))},s)}})}catch(r){console.error("Error parsing form data:",r),e.push("/")}},[e]);let x=e=>{e.loading||(c(e),sessionStorage.setItem("selectedPolicy",JSON.stringify(e)))};if(!r)return null;let u=D.map((e,r)=>1===r?"Processed":e);return(0,t.jsx)(n.Mx,{children:(0,t.jsxs)(n.mc,{className:"py-8",children:[(0,t.jsx)(n.SK,{steps:u,currentStep:2}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-foreground",children:"Your Insurance Options"}),(0,t.jsxs)("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["We found ",l.length," insurance policies for your ",r.vehicleType,". Compare and select the best option for you."]})]}),(0,t.jsxs)("div",{className:"bg-card border rounded-lg p-6 max-w-md mx-auto",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Your Details:"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Vehicle:"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:r.vehicleType})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Plate Number:"}),(0,t.jsx)("span",{className:"font-medium",children:r.plateNumber})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Postcode:"}),(0,t.jsx)("span",{className:"font-medium",children:r.postcode})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Customer Type:"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:r.customerType})]})]})]}),(0,t.jsx)(n.xA,{cols:{default:1,md:2,lg:3},gap:6,className:"max-w-7xl mx-auto",children:l.map(e=>(0,t.jsx)(f,{policy:e,isSelected:(null==o?void 0:o.id)===e.id,onSelect:x},e.id))}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-lg mx-auto",children:[(0,t.jsxs)(d.$,{variant:"outline",onClick:()=>{e.push("/")},className:"w-full sm:w-auto h-12",children:[(0,t.jsx)(w.A,{className:"w-4 h-4 mr-2"}),"Back to Form"]}),(0,t.jsxs)(d.$,{onClick:()=>{o&&e.push("/payment")},disabled:!o,className:"w-full sm:w-auto h-12 text-lg font-semibold shadow-lg transition-all duration-200 ".concat(o?"bg-primary hover:bg-primary/90 shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02]":""),children:[(0,t.jsx)(P.A,{className:"w-5 h-5 mr-2"}),"Proceed to Payment"]})]}),o&&(0,t.jsx)("div",{className:"text-center text-sm text-muted-foreground max-w-md mx-auto",children:(0,t.jsxs)("p",{children:["You've selected ",(0,t.jsx)("strong",{children:o.provider.name})," for"," ",(0,t.jsxs)("strong",{children:["RM",o.finalPrice.toFixed(2)]}),'. Click "Proceed to Payment" to complete your purchase.']})})]})]})})}}},e=>{e.O(0,[887,787,309,441,255,358],()=>e(e.s=6255)),_N_E=e.O()}]);